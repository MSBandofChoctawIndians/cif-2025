---
import Layout from "../../layouts/main.astro";
import { Button } from "../../components/ui/button";
import { Card, CardContent, CardFooter } from "../../components/ui/card";
import {
  Download,
  FileText,
  Globe,
  Facebook,
  Calendar,
  ArrowRight,
} from "lucide-react";

interface Competition {
  id: string;
  title: string;
  description: string;
  date: string;
  logo: string;
  links?: {
    flyer?: string;
    form?: string;
    webForm?: string;
    social?: string;
    compForm?: string;
    socialForm?: string;
    formButton?: boolean; // Optional, used for disabling the button
  };
}

const competitions: Competition[] = [
  {
    id: "rezrun",
    title: "Rez Run 2025",
    description:
      "The run is held in Choctaw, MS and trails through the reservation of the Mississippi Choctaw and the Choctaw Indian fairgrounds. The Mississippi Band of Choctaw Indians proudly welcomes all runners and visitors to the Choctaw Indian Fair.",
    date: "July 12, 2025",
    logo: "/competitions/rezrun/rezrun2025.webp",
    links: {
      form: "/competitions/rezrun/rezrun2025.pdf",
      webForm: "https://runsignup.com/Race/MS/Philadelphia/RezRun2014",
      social: "https://www.facebook.com/profile.php?id=100057294586733",
    },
  },
  {
    id: "ironwarrior",
    title: "Iron Warrior",
    description:
      "Iron Warrior consists of obstacles such as the steel log, yoke carry, tire flip, and truck pull. In the end of the competition, the winner will have to endure eight total obstacles in order to be called the next IRON WARRIOR!",
    date: "July 10-12, 2025",
    logo: "/competitions/ironwarrior/ironwarrior.webp",
    links: {
      flyer: "/competitions/ironwarrior/iron_warrior_flyer.jpg",
      form: "/competitions/ironwarrior/iron_warrior_form.jpg",
    },
  },
  {
    id: "classic",
    title: "Chief's Classic",
    description:
      "The Chief's Classic is a golf tournament held at the Dancing Rabbit Golf Club. The tournament is open to all participants. More details will be available closer to the event date.",
    date: "July 11, 2025",
    logo: "/competitions/classic/classic.webp",
  },
  {
    id: "volleyball",
    title: "Volleyball Tournament",
    description:
      "Details coming soon! This tournament is open to all participants.",
    date: "TBA",
    logo: "/competitions/volleyball/volleyball.webp",
  },
  {
    id: "tribalcornhole",
    title: "Tribal Member Tournament",
    description:
      "Details coming soon! This tournament is open to all tribal members.",
    date: "TBA",
    logo: "/competitions/cornhole/tribalCornhole.webp",
  },
  {
    id: "opencornhole",
    title: "Open Cornhole Tournament",
    description:
      "Details coming soon! This tournament is open to all participants.",
    date: "TBA",
    logo: "/competitions/cornhole/openCornhole.webp",
  },
  {
    id: "gospelnight",
    title: "Gospel Night",
    description:
      "Join us for a night of uplifting gospel music and performances featuring Tasha Cobbs Leonard and more!",
    date: "July 08, 2025",
    logo: "/competitions/gospelnight/gospelNight.webp",
    links: {
      flyer: "/competitions/gospelnight/gospel_night_flyer.jpg",
      webForm:
        "https://docs.google.com/forms/d/e/1FAIpQLSfZC_8mSIpLELmVJkz4V4oFeM0I43qZZ68nrbUzwJY1oAFHkA/viewform?pli=1",
    },
  },
  {
    id: "littlecif",
    title: "Little Mr. & Miss Choctaw Indian Fair Pageant",
    description:
      "At the Little Mr. & Miss Choctaw Indian Fair Pageant, participants from 0 months to 8 years old will complete in their traditional attire.",
    date: "July 09, 2025",
    logo: "/competitions/littlecif/lil-pageant.webp",
    links: {
      form: "/competitions/littlecif/lil_pageant_form.jpg",
      formButton: false, // Disable the form button
    },
  },
];
---

<Layout title="Competitions">
  <div
    class="flex min-h-screen flex-col bg-gradient-to-r from-neutral-400 via-neutral-200 to-neutral-500"
  >
    {/* Hero Section */}
    <section class="relative flex w-full items-center justify-center">
      <div class="absolute inset-0 z-0">
        <img
          src="/backdrops/competition-backdrop.svg"
          alt="Competitions background"
          class="absolute inset-0 h-full w-full object-cover brightness-50"
        />
      </div>
      <div class="container relative z-20 mx-auto px-4">
        <div
          class="mx-auto grid max-w-7xl gap-8 rounded-lg py-12 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"
        >
          {
            competitions.map((event: Competition) => (
              <a href={`#${event.id}`} class="fade-up block hover:opacity-70">
                <div class="flex h-full items-center rounded-lg border-2 border-gray-400 bg-white/70 p-4">
                  <img
                    src={event.logo}
                    width={800}
                    height={800}
                    alt={event.title}
                    class="h-full w-full"
                  />
                </div>
              </a>
            ))
          }
        </div>
      </div>
    </section>

    {/* Competitions List */}
    <section class="container mx-auto px-4 py-12">
      <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
        {
          competitions.map((competition: Competition) => (
            <Card
              id={competition.id}
              className="h-full flex flex-col overflow-hidden"
            >
              {/* Logo as full header */}
              <div class="relative aspect-square bg-gray-100">
                <div class="relative flex aspect-square items-center justify-center bg-gray-100">
                  <img
                    src={competition.logo || "https://placehold.co/280x280"}
                    alt={`${competition.title} logo`}
                    class="p-4"
                  />
                </div>
              </div>

              <CardContent className="pt-6">
                <div class="mb-3 flex items-start justify-between">
                  <h3 class="text-xl font-semibold">{competition.title}</h3>
                </div>

                <div class="text-muted-foreground mb-4 flex items-center text-sm">
                  <Calendar className="h-4 w-4 mr-2" />
                  {competition.date}
                </div>

                <p class="text-muted-foreground">{competition.description}</p>
              </CardContent>

              <CardFooter className="flex flex-col items-start space-y-3 pt-4 border-t mt-auto">
                <div class="flex w-full flex-wrap gap-2">
                  {competition.links?.flyer && (
                    <a href={competition.links.flyer} target="_blank">
                      <Button variant="outline">
                        <Download />
                        Flyer
                      </Button>
                    </a>
                  )}
                  {competition.links?.form &&
                    (competition.links.formButton === false ? (
                      <Button variant="outline" disabled>
                        <FileText />
                        Registration Closed
                      </Button>
                    ) : (
                      <a
                        href={competition.links.form}
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        <Button variant="outline">
                          <FileText />
                          Form
                        </Button>
                      </a>
                    ))}
                  {competition.links?.compForm && (
                    <a
                      href={competition.links.compForm}
                      target="_blank"
                      rel="noopener noreferrer"
                    >
                      <Button variant="outline">
                        <FileText />
                        Competitive Form
                      </Button>
                    </a>
                  )}
                  {competition.links?.socialForm && (
                    <a
                      href={competition.links.socialForm}
                      target="_blank"
                      rel="noopener noreferrer"
                    >
                      <Button variant="outline">
                        <FileText />
                        Social Form
                      </Button>
                    </a>
                  )}
                  {competition.links?.webForm && (
                    <a
                      href={competition.links.webForm}
                      target="_blank"
                      rel="noopener noreferrer"
                    >
                      <Button variant="outline">
                        <Globe />
                        Register
                      </Button>
                    </a>
                  )}
                  {competition.links?.social && (
                    <a
                      href={competition.links.social}
                      target="_blank"
                      rel="noopener noreferrer"
                    >
                      <Button variant="outline">
                        <Facebook />
                        Social
                      </Button>
                    </a>
                  )}
                </div>
              </CardFooter>
            </Card>
          ))
        }
      </div>
    </section>
  </div>
</Layout>
